No arquivo app/routes/super_admin.py, atualize a função list_all_agencies para retornar mais informações.

SUBSTITUA toda a função list_all_agencies por:

@router.get("/agencias")
async def list_all_agencies(current_user: dict = Depends(get_current_user)):
    """Lista todas as agências com métricas resumidas (apenas super_admin)."""
    
    if current_user.get("role") != "super_admin":
        raise HTTPException(status_code=403, detail="Acesso restrito a super administradores")
    
    supabase = get_supabase_client()
    
    try:
        # Buscar agências
        response = supabase.table("agencias").select(
            "id, nome, email, created_at, instance_name, whatsapp_phone_id"
        ).order("nome").execute()
        
        agencias = response.data or []
        
        # Para cada agência, buscar contagem de usuários e conversas
        for agencia in agencias:
            # Contar usuários
            usuarios_response = supabase.table("usuarios").select(
                "id", count="exact"
            ).eq("agencia_id", agencia["id"]).execute()
            agencia["total_usuarios"] = usuarios_response.count or 0
            
            # Contar conversas
            conversas_response = supabase.table("conversas").select(
                "id", count="exact"
            ).eq("agencia_id", agencia["id"]).execute()
            agencia["total_conversas"] = conversas_response.count or 0
            
            # Contar qualificados
            qualificados_response = supabase.table("conversas").select(
                "id", count="exact"
            ).eq("agencia_id", agencia["id"]).eq("lead_status", "qualificado").execute()
            agencia["total_qualificados"] = qualificados_response.count or 0
        
        return agencias
    except Exception as e:
        logger.error(f"Erro ao listar agências: {e}")
        raise HTTPException(status_code=500, detail=str(e))


NÃO altere nenhum outro código do arquivo.