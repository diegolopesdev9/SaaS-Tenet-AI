No arquivo app/routes/super_admin.py, adicione uma nova rota para atualizar um usuário específico.

Adicione esta rota APÓS a rota toggle_usuario:

@router.patch("/usuarios/{usuario_id}")
async def update_usuario(
    usuario_id: str,
    request: Request,
    current_user: dict = Depends(require_super_admin)
):
    """Atualiza dados de um usuário específico."""
    logger.info(f"Super Admin {current_user['email']} atualizando usuário: {usuario_id}")
    
    supabase = get_supabase_client()
    
    try:
        body = await request.json()
        
        # Campos permitidos para atualização
        allowed_fields = ["nome", "email", "role", "agencia_id"]
        update_data = {k: v for k, v in body.items() if k in allowed_fields and v is not None}
        
        # Se nova senha foi fornecida, fazer hash
        if body.get("nova_senha"):
            if len(body["nova_senha"]) < 6:
                raise HTTPException(status_code=400, detail="Senha deve ter no mínimo 6 caracteres")
            update_data["senha_hash"] = pwd_context.hash(body["nova_senha"])
            update_data["deve_alterar_senha"] = body.get("forcar_troca_senha", True)
        
        if not update_data:
            raise HTTPException(status_code=400, detail="Nenhum campo válido para atualizar")
        
        update_data["updated_at"] = datetime.now(timezone.utc).isoformat()
        
        # Verificar se usuário existe
        existing = supabase.table("usuarios").select("id, role").eq("id", usuario_id).execute()
        if not existing.data:
            raise HTTPException(status_code=404, detail="Usuário não encontrado")
        
        # Não permitir alterar super_admin
        if existing.data[0].get("role") == "super_admin" and current_user["id"] != usuario_id:
            raise HTTPException(status_code=403, detail="Não é permitido alterar outro super admin")
        
        response = supabase.table("usuarios").update(update_data).eq("id", usuario_id).execute()
        
        if response.data:
            return {"success": True, "usuario": response.data[0]}
        
        raise HTTPException(status_code=404, detail="Usuário não encontrado")
        
    except HTTPException:
        raise
    except Exception as e:
        logger.error(f"Erro ao atualizar usuário: {e}")
        raise HTTPException(status_code=500, detail=str(e))


@router.get("/usuarios/{usuario_id}")
async def get_usuario(
    usuario_id: str,
    current_user: dict = Depends(require_super_admin)
):
    """Busca dados de um usuário específico."""
    supabase = get_supabase_client()
    
    try:
        response = supabase.table("usuarios").select(
            "id, email, nome, role, ativo, agencia_id, deve_alterar_senha, created_at"
        ).eq("id", usuario_id).execute()
        
        if response.data:
            return response.data[0]
        
        raise HTTPException(status_code=404, detail="Usuário não encontrado")
        
    except HTTPException:
        raise
    except Exception as e:
        logger.error(f"Erro ao buscar usuário: {e}")
        raise HTTPException(status_code=500, detail=str(e))


NÃO altere nenhum outro código do arquivo.